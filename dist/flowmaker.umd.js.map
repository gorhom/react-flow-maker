{"version":3,"file":"flowmaker.umd.js","sources":["../src/logic.js","../src/flowTree.js","../src/utils.js","../src/icons.js","../src/addbutton.js","../src/tooltip.js","../src/input.js","../src/block.js","../src/graphPart.js","../flowmaker.js"],"sourcesContent":["export default class Logic {\n  constructor() {\n    this.conf = {\n      components: {},\n      introComponents: [],\n    }\n    this.errors = []\n  }\n  title(compoentName) {\n    return this.conf.components[compoentName].title\n  }\n  get() {\n    return this.conf\n  }\n  parseNewLogic(input) {\n    const outErrs = []\n    const warn = (...data) => {\n      outErrs.push(data.join(' '))\n      console.log(\"logic parse warning:\", ...data)\n    }\n\n    let conf = {\n      components: {},\n      introComponents: [],\n    }\n\n    if (input.components) {\n      if (Array.isArray(input.components)) {\n        input.components.map((component, i) => {\n          if (!component.name || !component.title) {\n            warn(`logic.components[${i}] does not have a name or title field, this component will be ignored`)\n            return\n          }\n          \n          const alreadyUsedNames = []\n\n          let toInsert = {\n            name: component.name,\n            title: component.title,\n            next: component.next ? Array.isArray(component.next) ? component.next : [component.next] : [],\n            tooltip: component.tooltip,\n            inputs: [],\n            advancedInputs: [],\n          }\n\n          if (Array.isArray(component.inputs)) {\n            component.inputs.map((input, inputID) => {\n              if (!input.title || !input.name || !input.type) {\n                warn(`logic.components[${i}].inputs[${inputID}] does not have a name, type or title field, this input will be ignored`)\n                return\n              }\n\n              if (typeof input.validation != 'function' && typeof input.validation != 'undefined') {\n                warn(`logic.components[${i}].inputs[${inputID}].validation must be undefined or a function`)\n                return\n              }\n              \n              if (typeof input.tooltip != 'string' && input.tooltip !== undefined) {\n                warn(`logic.components[${i}].inputs[${inputID}].tooltip must be a string or not undefined`)\n                return\n              }\n\n              if (alreadyUsedNames.indexOf(input.name) != -1) {\n                warn(`logic.components[${i}].inputs[${inputID}].name can't be equal to other names`)\n                return\n              }\n\n              let toReturn = {\n                name: input.name,\n                title: input.title,\n                type: input.type,\n                validation: input.validation,\n                tooltip: input.tooltip,\n                default: input.default,\n              }\n\n              switch (input.type) {\n                case 'text':\n                  if (typeof input.default != 'string' && input.default !== undefined) {\n                    warn(`logic.components[${i}].inputs[${inputID}].default must be a string or undefined, using default empty string`)\n                    toReturn.default = ''\n                  }\n                  if (input.default == undefined) {\n                    toReturn.default = ''\n                  }\n                  break;\n                case 'number':\n                  if (typeof input.default != 'number' && input.default !== undefined) {\n                    warn(`logic.components[${i}].inputs[${inputID}].default must be a number or undefined, using default 0`)\n                    toReturn.default = 0\n                  }\n                  if (input.default == undefined) {\n                    toReturn.default = 0\n                  }\n                  break;\n                case 'switch':\n                  if (typeof input.default != 'boolean' && input.default !== undefined) {\n                    warn(`logic.components[${i}].inputs[${inputID}].default must be a boolean or undefined, using default empty string`)\n                    toReturn.default = false\n                  }\n                  if (input.default == undefined) {\n                    toReturn.default = false\n                  }\n                  break;\n                case 'dropdown':\n                  if (!Array.isArray(input.options)) {\n                    warn(`logic.components[${i}].inputs[${inputID}].options is not defined or is not an array, skipping this item`)\n                    return\n                  } else {\n                    toReturn['options'] = input.options.map((option, optionID) => {\n                      if (typeof option.title != 'string' || typeof option.value != 'string' || (typeof option.tooltip != 'string' && option.tooltip != undefined)) {\n                        warn(`logic.components[${i}].inputs[${inputID}].options[${optionID}] does not have the correct items (title string, value string, tooltip string), skipping this item`)\n                        return\n                      }\n                      return {\n                        title: option.title,\n                        tooltip: option.tooltip,\n                        value: option.value,\n                      }\n                    }).filter(item => item)\n                  }\n                  break;\n                default:\n                  warn(`logic.components[${i}].inputs[${inputID}].type = '${input.type}' is not valid, this input will be ignored`)\n                  return\n              }\n\n              alreadyUsedNames.push(input.name)\n              toInsert[input.advanced ? 'advancedInputs' : 'inputs'].push(toReturn)\n              return\n            })\n          }\n\n          conf.components[component.name] = toInsert\n        })\n        Object.keys(conf.components).map(key => {\n          conf.components[key].next = conf.components[key].next.filter(componentKey => {\n            if (conf.components[componentKey]) {\n              return true\n            }\n            warn(`logic.component[???].next contains '${componentKey}' that does not exsist, this item will be ignored`)\n            return false\n          })\n        })\n      } else {\n        warn(`logic.components is not an array`) \n      }\n    }\n\n    if (input.introComponents) {\n      if (Array.isArray(input.introComponents)) {\n        input.introComponents.map(name => {\n          if (conf.components[name]) {\n            conf.introComponents.push(name)\n          } else {\n            warn(`logic.introComponents['${name}'] is not a known component`) \n          }\n        })\n      } else if (typeof input.introComponents == 'string') {\n        if (conf.components[input.introComponents]) {\n          conf.introComponents.push(input.introComponents)\n        } else {\n          warn(`logic.introComponents = '${name}' is not a known component`) \n        }\n      } else {\n        warn(`logic.introComponents is not an array or string`) \n      }\n    }\n\n    this.errors = outErrs\n    this.conf = conf\n    return conf\n  }\n}\n","import utils from './utils'\n\nexport default class Tree {\n  constructor(Logic, FlowMaker) {\n    this.Logic = Logic\n    this.FlowMaker = FlowMaker\n    this.maxDepth = 0\n    this.flow = []\n    \n    this.exportBuzzy = false\n    this.reExport = false\n\n    this.exportFunc = undefined\n  }\n\n  setExportFunc(func) {\n    this.exportFunc = func\n  }\n\n  caclMaxDepth() {\n    const vm = this\n    this.maxDepth = 0\n\n    const loopOverNext = next => {\n      next.map(item => {\n        if (item.depth > vm.maxDepth) {\n          vm.maxDepth = item.depth\n        }\n        loopOverNext(item.next)\n      })\n    }\n    loopOverNext(this.flow)\n\n    this.FlowMaker.forceUpdate()\n  }\n\n  flowItem(component, lastIds, currentDepth) {\n    const id = utils.RandomString(20)\n    return {\n      depth: currentDepth + 1,\n      next: [],\n      id: id,\n      path: [...lastIds, id],\n      inputData: {},\n      inputValidation: {},\n      component,\n    }\n  }\n\n  startFlow(componentName) {\n    let component = this.Logic.conf.components[componentName]\n    if (!component) {\n      return\n    }\n\n    this.flow.push(this.flowItem(component, [], 0))\n    this.caclMaxDepth()\n    this.export()\n  }\n\n  addComponent(componentName, path) {\n    let component = this.Logic.conf.components[componentName]\n    if (!component) {\n      return\n    }\n\n    let toAppendOn = this.findPath(path)\n    toAppendOn.next.push(this.flowItem(component, toAppendOn.path, toAppendOn.depth))\n\n    this.caclMaxDepth()\n    this.export()\n  }\n\n  findPath(path) {\n    let toReturn = undefined\n    const loopOverNext = next => {\n      for (let i = 0; i < next.length; i++) {\n        if (next[i].path === path) {\n          toReturn = next[i]\n          break\n        }\n        loopOverNext(next[i].next)\n      }\n    }\n    loopOverNext(this.flow)\n    return toReturn\n  }\n\n  removeComponent(path) {\n    const loopOverNext = next => {\n      next = Object.assign([], next)\n      for (let i = 0; i < next.length; i++) {\n        if (next[i].path === path) {\n          next.splice(i, 1)\n          break\n        }\n        next[i].next = loopOverNext(next[i].next) \n      }\n      return next\n    }\n    this.flow = loopOverNext(this.flow)\n\n    this.caclMaxDepth()\n    this.export()\n  }\n\n  export() {\n    if (!this.exportBuzzy) {\n      this.exportBuzzy = true\n      \n      setTimeout(() => {\n        if (this.reExport) {\n          this.exportBuzzy = false\n          this.reExport = false\n          this.export()\n          return\n        }\n\n        let toExport = []\n      \n        const mapOverNext = (posInExpo, next) => {\n          next.map(item => {\n            let inputs = {}\n            let inputErrors = {}\n\n            Object.keys(item.inputData).map(i => {\n              inputs[i] = item.inputData[i].value\n              if (item.inputData[i].error) {\n                inputErrors[i] = item.inputData[i].error\n              }\n            })\n\n            const componentName = item.component.name\n            posInExpo.push({\n              component: {\n                title: item.component.title,\n                name: item.component.name\n              },\n              inputs,\n              inputErrors,\n              id: item.id,\n              next: [],\n            })\n            mapOverNext(posInExpo[posInExpo.length-1].next, item.next)\n          })\n        } \n\n        mapOverNext(toExport, this.flow)\n\n        if (typeof this.exportFunc == 'function') {\n          this.exportFunc(toExport)\n        }\n\n        setTimeout(() => {\n          this.exportBuzzy = false\n          if (this.reExport) {\n            this.reExport = false\n            this.export()\n          }  \n        }, 30)\n      }, 50)\n    } else {\n      this.reExport = true\n    }\n  }\n\n  import(flow) {\n    if (!Array.isArray(flow)) {\n      return\n    }\n\n    let newFlow = []\n\n    const mapOverFlow = (arr, mapTo, lastIds) => {\n      arr.map(item => {\n        let toPush = this.flowItem(this.Logic.conf.components[item.component.name], lastIds, lastIds.length)\n        \n        toPush.id = item.id\n        toPush.inputData = Object.keys(item.inputs).reduce((acc, i) => {\n          acc[i] = {\n            value: item.inputs[i],\n            error: ''\n          }\n          return acc\n        }, {})\n        toPush.path.splice(-1,1)\n        toPush.path.push(item.id)\n        mapTo.push(toPush)\n\n        mapOverFlow(item.next, mapTo[mapTo.length-1].next, [...lastIds, item.id])\n      })\n    }\n    mapOverFlow(flow, newFlow, [])\n\n    this.flow = newFlow\n    this.caclMaxDepth()\n  }\n\n  updateInputValue(path, value, field, isAdvanced) {\n    let component = this.findPath(path)\n\n    if (component) {\n      if (!isAdvanced) {\n        if (component.component.inputs && component.component.inputs[field]) {\n          const input = component.component.inputs[field]\n          component.inputData[input.name] = value\n        }\n      } else {\n        if (component.component.advancedInputs && component.component.advancedInputs[field]) {\n          const input = component.component.advancedInputs[field]\n          component.inputData[input.name] = value\n        }\n      }\n    }\n\n    this.export()\n  }\n} \n","export default {\n  RandomString(length) {\n    let text = \"\";\n    const possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  \n    for (let i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    \n    return text;\n  }\n}\n","import React from 'react'\n\nexport const Add = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"/><path d=\"M0 0h24v24H0z\" fill=\"none\"/></svg>\nexport const Delete = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v10zM18 4h-2.5l-.71-.71c-.18-.18-.44-.29-.7-.29H9.91c-.26 0-.52.11-.7.29L8.5 4H6c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1z\"/></svg>\nexport const DropDown = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M8.71 11.71l2.59 2.59c.39.39 1.02.39 1.41 0l2.59-2.59c.63-.63.18-1.71-.71-1.71H9.41c-.89 0-1.33 1.08-.7 1.71z\"/></svg>\nexport const DropUp = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M8.71 12.29L11.3 9.7c.39-.39 1.02-.39 1.41 0l2.59 2.59c.63.63.18 1.71-.71 1.71H9.41c-.89 0-1.33-1.08-.7-1.71z\"/></svg>\nexport const Info = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1-8h-2V7h2v2z\"/></svg>\nexport const Check = () => <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/></svg>\n","import React from 'react'\nimport {Add} from './icons'\n\nexport default class AddButton extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      open: false,\n    }\n  }\n  clickRoundButton() {\n    this.setState({\n      open: !this.state.open,\n    })\n  }\n  clickOption(option) {\n    this.props.out(option)\n    this.setState({\n      open: false\n    })\n  }\n  render() {\n    const p = this.props\n    const s = this.state\n    return (\n      <div className=\"flow-addIcon\">\n        <div className={`flow-round ${s.open ? 'flow-open' : 'flow-closed'}`} onClick={() => this.clickRoundButton()}>\n          <Add/>\n        </div>\n        <div className={`flow-options ${s.open ? 'flow-open' : 'flow-closed'}`}>\n          {p.options ? p.options.map((option, id) => \n            <div onClick={() => this.clickOption(option)} key={id} className=\"flow-option\">\n              {this.props ? this.props.Logic.title(option) : option}\n            </div>\n          ):''}\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport {Info} from './icons'\n\nexport default class ToolTip extends React.Component {\n  render() {\n    if (!this.props.tip) {\n      return ''\n    }\n\n    return (\n      <div className={`flow-tooltip flow-transparrent${this.props.transparrent ? 'True' : 'False'}`}>\n        <div className=\"flow-icon\">\n          <Info/>\n        </div>\n        <div className=\"flow-noWidth\">\n          <div className=\"flow-fullwidth\">\n            <div className=\"flow-popup\">\n              {this.props.tip}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport {DropDown, Check} from './icons'\nimport ToolTip from './tooltip'\n\nexport default class Input extends React.Component {\n  constructor() {\n    super()\n    this.refID = \"\"\n    this.state = {\n      value: '',\n      error: '',\n      dropDownSelected: -1,\n      isAfterInit: false,\n      dropDownopen: false,\n    }\n  }\n\n  tellParent() {\n    if (this.props.onChange) {\n      this.props.onChange({\n        error: this.state.error,\n        value: this.state.value,\n      })\n    }\n  }\n\n  updateDefaultVal() {\n    if ((this.props.input && !this.state.isAfterInit) || this.refID != this.props.refID) {\n      this.refID = this.props.refID\n      const defaultInput = typeof this.props.initalVal != 'undefined' ? this.props.initalVal : this.props.input.default\n\n      this.setState({\n        value: defaultInput,\n        isAfterInit: true,\n      }, () => {\n        this.validate(defaultInput, () => {\n          if (this.props.input.type == 'dropdown' && this.state.dropDownSelected == -1) {\n            let dropDownSelected = 0\n            this.props.input.options.map((option, id) => {\n              if (option.value == defaultInput) {\n                dropDownSelected = id\n              }\n            })\n            this.setState({\n              dropDownSelected\n            })\n          }\n          this.tellParent()\n        })\n      })\n    }\n  }\n\n  validate(newVal, cb) {\n    if (typeof this.props.input.validation == 'function') {\n      let error = this.props.input.validation(undefined, newVal)\n      if (typeof error != 'string') {\n        error = ''\n      }\n      this.setState({\n        error\n      }, cb)\n    }\n    if (typeof cb == 'function') {\n      cb()\n    }\n  }\n\n  updateValue(newVal) {\n    this.setState({value: newVal}, () => {\n      this.validate(newVal, () => {\n        this.tellParent()\n      })\n    })\n  }\n\n  componentDidMount() {\n    this.updateDefaultVal()\n  }\n\n  componentDidUpdate() {\n    this.updateDefaultVal()\n    if (this.props.hiddenDropdown && this.state.dropDownopen) {\n      this.setState({\n        dropDownopen: false,\n      })\n    }\n  }\n  \n  render() {\n    const error = this.state.error\n    const input = this.props.input\n    if (!input) {\n      return (<div className=\"flow-input\"></div>)\n    }\n\n    return (\n      <div className={`flow-input flow-hasErr${error ? 'True' : 'False'}`}>\n        <div className=\"flow-label\"><span>{input.title}</span><ToolTip transparrent={true} tip={input.tooltip}/></div>\n        <div className=\"flow-actualInput\">\n          {(input.type == 'text' || input.type == 'number')?\n            <div className=\"flow-text\">\n              <input type={input.type} value={this.state.value} onChange={e => this.updateValue(e.target.value)}/>\n            </div>\n          :input.type == 'switch'?\n            <div className=\"flow-switch\">\n              <div \n                onClick={() => this.updateValue(!this.state.value)} \n                className={`flow-actualSwitch ${this.state.value ? 'flow-true' : 'flow-false'}`}\n              ><div className=\"flow-inside\"><Check/></div></div>\n            </div>\n          :input.type == 'dropdown'?\n            <div className=\"flow-dropdown\">\n              <div className=\"flow-select\" onClick={() => this.setState({dropDownopen: !this.state.dropDownopen})}>\n                <div className=\"flow-optTitle\">\n                  {this.state.dropDownSelected == -1 || !input.options || input.options.length == 0\n                    ? '...' \n                    : input.options[this.state.dropDownSelected].title\n                  }\n                </div>\n                <div className=\"flow-icon\">\n                  {!input.options || input.options.length == 0 ? '' : <DropDown/>}\n                </div>\n              </div>\n              <div className={`flow-options flow-open${this.state.dropDownopen ? 'True' : 'False'}`}>\n                {input.options.map((option, optionID) => \n                  <div \n                    key={optionID} \n                    className=\"flow-option\"\n                    onClick={() => {\n                      this.updateValue(option.value)\n                      this.setState({\n                        dropDownSelected: optionID,\n                        dropDownopen: false,\n                      })\n                    }}\n                  >\n                    <div className=\"flow-optTitle\">{option.title}</div>\n                    <ToolTip tip={option.tooltip}/>\n                  </div>\n                )}\n              </div>\n            </div>\n          :''}\n        </div>\n        {error?\n          <div className=\"flow-error\">{error}</div>\n        :''}\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport Input from './input'\nimport {Delete, Add, DropDown, DropUp} from './icons'\nimport ToolTip from './tooltip'\n\nexport default class Block extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      hover: false,\n      showAddOptions: false,\n      showAdvanced: false,\n    }\n\n    this.remove = this.remove.bind(this)\n  }\n  remove() {\n    this.props.graphInstance.props.Tree\n    .removeComponent(this.props.graphInstance.props.data.path)\n  }\n  add() {\n\n    if (this.props.graphInstance.props.data.component.next.length == 1) {\n      this.realAdd(this.props.graphInstance.props.data.component.next[0])\n      return\n    }\n\n    this.setState({\n      showAddOptions: true,\n    })\n  }\n  realAdd(toAdd) {\n    this.setState({\n      showAddOptions: false,\n    })\n\n    if (!toAdd) {\n      return\n    }\n\n    this.props.graphInstance.props.Tree.addComponent(toAdd, this.props.graphInstance.props.data.path)\n  }\n  render() {\n    const data = this.props.graphInstance.props.data\n    if (!data) {\n      return ''\n    }\n    const comp = data.component\n    const inputs = comp.inputs\n    const advancedInputs = comp.advancedInputs\n\n    return (\n      <div \n        className={`flow-fullBlock flow-hover${this.state.hover && !this.state.showAddOptions ? 'True' : 'False'}`}\n        onMouseOver={() => {\n          if (!this.state.hover) {\n            this.setState({hover: true})\n          }\n        }}\n        onMouseOut={() => {\n          if (this.state.hover) {\n            this.setState({hover: false})\n          }\n        }}\n      >\n        <div className=\"flow-side\">\n          <div className=\"flow-innerSide\">\n            <div className=\"flow-round\" onClick={this.remove}>\n              <Delete/>\n            </div>\n          </div>\n        </div>\n        <div className=\"flow-middle\">\n          <div className=\"flow-title\">{comp.title}<ToolTip transparrent={true} tip={comp.tooltip}/></div>\n          <div className=\"flow-inputs\">\n            {\n              inputs.map((input, inputID) => {\n                const inputData = data.inputData[input.name]\n                return (\n                  <Input\n                    refID={data.id}\n                    key={inputID}\n                    input={input}\n                    initalVal={inputData ? inputData.value : undefined}\n                    onChange={inputData => {\n                      this.props.graphInstance.props.Tree\n                      .updateInputValue(data.path, inputData, inputID, false)\n                    }}\n                  />\n                )\n              })\n            }\n            {advancedInputs.length > 0?\n              <div className=\"flow-showAdvanced\">\n                <div \n                  className=\"flow-button\"\n                  onClick={() => {\n                    this.setState({showAdvanced: !this.state.showAdvanced}, () => {\n                      if (this.props.graphParrentInstance) {\n                        this.props.graphParrentInstance.forceUpdate()\n                      } else if (this.props.graphInstance) {\n                        this.props.graphInstance.forceUpdate()\n                      }\n                    })\n                  }}\n                >Advanced {this.state.showAdvanced ? <DropUp/> : <DropDown/>}</div>\n              </div>\n            :''}\n          </div>\n          <div className={`flow-inputs flow-advancedInputs flow-show${this.state.showAdvanced ? 'True' : 'False'}`}>\n            {advancedInputs.map((input, inputID) => {\n              const inputData = data.inputData[input.name]\n              return (\n                <Input\n                  hiddenDropdown={!this.state.showAdvanced}\n                  key={inputID}\n                  input={input}\n                  initalVal={inputData ? inputData.value : undefined}\n                  onChange={inputData => {\n                    this.props.graphInstance.props.Tree\n                    .updateInputValue(data.path, inputData, inputID, true)\n                  }}\n                />\n              )\n            })}\n          </div>\n        </div>\n        {comp.next.length > 0 ?\n          <div className={`flow-nextOptions flow-show${this.state.showAddOptions ? 'True' : 'False'}`}>\n            <div className=\"flow-closePopup\" onClick={() => this.realAdd()}>\n              <Add/>\n            </div>\n            <div className=\"flow-pos\">\n              <div className=\"flow-optionsTitle\">Options</div>\n              {comp.next.map((componentName, key) => \n                <div \n                  onClick={() => this.realAdd({componentName})} \n                  className=\"flow-option\" \n                  key={key}\n                >{this.props ? this.props.graphInstance.props.Logic.title(componentName) : componentName}</div>\n              )}\n            </div>\n          </div>\n        :''}\n        {comp.next.length > 0 ?\n          <div className=\"flow-side\">\n            <div className=\"flow-innerSide\">\n              <div className=\"flow-round\" onClick={() => this.add()}>\n                <Add/>\n              </div>\n            </div>\n          </div>\n        :''}\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport Block from './block'\n\nconst GraphPartClass = class GraphPart extends React.Component {\n  constructor() {\n    super()\n\n    this.state = {\n      element: undefined,\n      lastParentPosition: 0,\n    }\n    \n    this.mounted = false\n  }\n\n  componentDidMount() {\n    this.mounted = true\n    this.watchParent()\n  }\n\n  componentWillUnmount() {\n    this.mounted = false\n  }\n\n  watchParent() {\n    if (this.mounted) {\n      let parentEl = this.props.connectTo\n      let parent = undefined\n      if (parentEl) {\n        parent = parentEl.getBoundingClientRect()\n        if (parent.top != this.state.lastParentPosition) {\n          this.setState({\n            lastParentPosition: parent.top\n          })\n        }\n      }\n      setTimeout(() => {\n        this.watchParent()\n      }, 800)\n    }\n  }\n\n  render() {\n    let parentLineHeight = 0\n    let parentLineToTop = 0\n    let type = ''\n\n    if (this.props.connectTo && this.state.element) {\n      let parent = this.props.connectTo.getBoundingClientRect()\n      let child = this.state.element.getBoundingClientRect()\n      let spaceBetween = (parent.y + (parent.height / 2)) - (child.y + (child.height / 2))  \n\n      if (spaceBetween == 0) {\n        parentLineHeight = 20\n        parentLineToTop = 10\n        type = 'straight'\n      } else if (spaceBetween < 0) {\n        parentLineHeight = ((-spaceBetween) + 20)\n        parentLineToTop = parentLineHeight - 10\n        type = 'bottomToTop'\n      } else {\n        parentLineHeight = spaceBetween + 20\n        parentLineToTop = 10\n        type = 'topToBottom'\n      }\n    }\n    return (\n      <div className=\"flow-graphPart\" style={{width: this.props.width}}>\n        {parentLineHeight && parentLineToTop && type ?\n          <div className=\"flow-lineToParrent\" style={{bottom: `${parentLineToTop}px`}}>\n            <svg viewBox={`0 0 80 ${parentLineHeight}`} height={`${parentLineHeight}px`} style={{minHeight: `${parentLineHeight}px`}} xmlns=\"http://www.w3.org/2000/svg\">\n              { type == 'bottomToTop' ?\n                <path\n                  strokeWidth=\"7\" \n                  stroke=\"#ccc\" \n                  strokeLinecap=\"round\" \n                  fill=\"none\" \n                  d={`M0,10 C70,10 30,${parentLineHeight-10} 80,${parentLineHeight-10}`}\n                />\n              : type == 'topToBottom' ?\n                <path \n                  strokeWidth=\"7\" \n                  stroke=\"#ccc\" \n                  strokeLinecap=\"round\" \n                  fill=\"none\" \n                  d={`M0,${parentLineHeight-10} C70,${parentLineHeight-10} 30,10 80,10`}\n                />\n              : \n                <path \n                  strokeWidth=\"7\" \n                  stroke=\"#ccc\" \n                  strokeLinecap=\"round\" \n                  fill=\"none\" \n                  d=\"M0,10 C70,10 30,10 80,10\"\n                />\n              }\n            </svg>\n          </div>\n        :''}\n        <div\n          ref={element => {\n            \n            let parentEl = this.props.connectTo\n            let parent = undefined\n            if (parentEl) {\n              parent = parentEl.getBoundingClientRect()\n            }\n\n            if (typeof this.state.element == 'object') {\n              if (!parent || parent.top == this.state.lastParentPosition) {\n                return\n              }\n            }\n\n            let toUpdate = {\n              element,\n            }\n\n            if (parent) {\n              toUpdate.lastParentPosition = parent.top\n            }\n\n            this.setState(toUpdate)\n          }} \n          className=\"flow-graph\" \n          style={{minWidth: this.props.itemWidth}}\n        >\n          <Block \n            graphInstance={this} \n            graphParrentInstance={this.props.connectToInstance}\n          />\n        </div>\n        <div className=\"flow-next\">\n          {this.props.data.next.map((item, i) => \n            <GraphPartClass \n              Tree={this.props.Tree} \n              Logic={this.props.Logic} \n              connectTo={this.state.element}\n              connectToInstance={this}\n              width={this.props.width - this.props.itemWidth} \n              itemWidth={this.props.itemWidth}\n              key={i} \n              data={item}\n            />\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default GraphPartClass\n","import React from 'react'\nimport './style.styl'\nimport Logic from './src/logic'\nimport Tree from './src/flowTree'\nimport AddButton from './src/addbutton'\nimport GraphPart from './src/graphPart'\nimport sha1 from 'js-sha1'\n\nexport default class FlowMaker extends React.Component {\n  constructor() {\n    super()\n\n    this.Logic = new Logic()\n    this.Tree = new Tree(this.Logic, this)\n\n    this.lastlogicHash = ''\n    this.state = {\n      settings: this.Logic.get(),\n    }\n  }\n\n  componentDidMount() {\n    const newHash = sha1(this.props.logic)\n    if (newHash != this.lastlogicHash) {\n      this.lastlogicHash = newHash\n      this.setState({\n        settings: this.Logic.parseNewLogic(this.props.logic)\n      }, () => this.afterMount())\n    } else {\n      this.afterMount()\n    }\n  }\n\n  afterMount() {\n    if (typeof this.props.onChange == 'function')\n      this.Tree.setExportFunc(this.props.onChange)\n    if (typeof this.props.flow == 'object')\n      this.Tree.import(this.props.flow)\n  }\n\n  render() {\n    const s = this.state.settings\n\n    return (\n      <div className=\"flowMakerComp\">\n        <div className=\"flowMakerContainer\" style={{minWidth: `${250 + (380 * this.Tree.maxDepth)}px`}}>\n          <div className=\"flow-row\" style={{minWidth: '250px'}}>\n            {s.introComponents.length > 0 ?\n              <div className=\"flow-startPoint\">\n                <h3>Start here</h3>\n                <AddButton\n                  Tree={this.Tree}\n                  Logic={this.Logic}\n                  options={s.introComponents}\n                  out={componentName => this.Tree.startFlow(componentName)}\n                />\n              </div>\n            :''}\n          </div>\n\n          <div className=\"flow-actualGraph\" style={{width: `${380 * this.Tree.maxDepth}px`}}>\n            {this.Tree.flow.map((item, i) => \n              <GraphPart\n                Tree={this.Tree} \n                Logic={this.Logic}\n                width={380 * this.Tree.maxDepth}\n                itemWidth={380} \n                key={i} \n                data={item}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n"],"names":["Logic","constructor","conf","errors","title","compoentName","this","components","get","parseNewLogic","input","outErrs","warn","push","data","join","log","Array","isArray","map","component","i","name","alreadyUsedNames","toInsert","next","tooltip","inputs","inputID","type","validation","undefined","indexOf","toReturn","default","options","option","optionID","value","filter","item","advanced","Object","keys","key","componentKey","introComponents","Tree","FlowMaker","maxDepth","flow","exportBuzzy","reExport","exportFunc","setExportFunc","func","caclMaxDepth","vm","loopOverNext","depth","forceUpdate","flowItem","lastIds","currentDepth","id","length","text","possible","charAt","Math","floor","random","utils","path","startFlow","componentName","export","addComponent","toAppendOn","findPath","let","removeComponent","assign","splice","toExport","mapOverNext","posInExpo","inputErrors","inputData","error","import","newFlow","mapOverFlow","arr","mapTo","toPush","reduce","acc","updateInputValue","field","isAdvanced","advancedInputs","const","Add","React","xmlns","width","height","viewBox","d","fill","Delete","DropDown","DropUp","Info","Check","AddButton","state","open","clickRoundButton","setState","clickOption","props","out","render","p","s","className","onClick","Component","ToolTip","tip","transparrent","Input","refID","dropDownSelected","isAfterInit","dropDownopen","tellParent","onChange","updateDefaultVal","defaultInput","initalVal","validate","newVal","cb","updateValue","componentDidMount","componentDidUpdate","hiddenDropdown","e","target","Block","hover","showAddOptions","showAdvanced","remove","bind","graphInstance","add","realAdd","toAdd","comp","onMouseOver","onMouseOut","graphParrentInstance","GraphPartClass","element","lastParentPosition","mounted","watchParent","componentWillUnmount","parentEl","connectTo","parent","getBoundingClientRect","top","setTimeout","parentLineHeight","parentLineToTop","child","spaceBetween","y","style","bottom","minHeight","strokeWidth","stroke","strokeLinecap","ref","toUpdate","minWidth","itemWidth","connectToInstance","lastlogicHash","settings","newHash","sha1","logic","afterMount","GraphPart"],"mappings":"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"}